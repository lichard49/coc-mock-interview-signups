<!DOCTYPE html>
<html>
  <head lang="en">
    <title>Schedulr</title>

    <!-- Foundation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Slick slider -->
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.css"/>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.5.9/slick.min.js"></script>

    <!-- Firebase -->
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>

    <!-- My stuff -->
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <div class="row">
      <div class="medium-12 columns">

        <h3>Georgia Tech College of Computing<br>Mock Interview Sign Ups</h3>
        <hr>
        <div class="your-class">
          <div>
            <p>Step 1. Choose a time and interviewer.</p>
            <table id="calendar" border="1" style="width:100%">
            </table>
          </div>
          <div>
            <p>Step 2. Tell us about yourself.</p>
          </div>
          <div>
            <p>Step 3. You're all done!</p>
          </div>
        </div>

        

      </div>
    </div>

    <script type="text/javascript">

      function buildCalendar() {
        var days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
        var hours = ['9:00AM', '10:00AM', '11:00AM', '12:00PM', '1:00PM', '2:00PM', '3:00PM', '4:00PM', '5:00PM'];
        
        var calendarContents = '<tr><th></th>';
        var day;
        for(day in days) {
          calendarContents += '<th>' + days[day] + '</th>';
        }
        calendarContents += '</tr>'

        var hour;
        for(hour in hours) {
          calendarContents += '<tr><td class="firstColumn">' + hours[hour] + '</td>';
          for(day in days) {
            calendarContents += '<td id="' + days[day] + '-' + hours[hour] + '"></td>';
          }
          calendarContents += '</tr>';
        }

        return calendarContents;
      }

      function escapeSelector( selector ) {
        return selector.replace( /(:|\.|\[|\]|,)/g, "\\$1" );
      }

      $(document).ready(function() {
        $('#calendar').html(buildCalendar());

        $('.your-class').slick();

        var firebase = new Firebase("https://coc-mock-interviews.firebaseio.com/");
        firebase.child("week").on("value", function(snapshot) {
          snapshot.forEach(function(daySnapshot) {
            daySnapshot.forEach(function(hourSnapshot) {
              var day = daySnapshot.key();
              var hour = hourSnapshot.key();
              var cellContents = '';

              hourSnapshot.forEach(function(personSnapshot) {
                if(personSnapshot.val() == 'available') {
                  cellContents += '<button class="interviewer">' + personSnapshot.key() + '</button>';
                }
              });

              $('#'+escapeSelector(day + '-' + hour)).html(cellContents);

              $('.interviewer').on('click', function() {
                $('.slick-next').click();
              });
            });
          });
        });
      });
    </script>
  </body>
</html>